import{S as w,T as u,U as C,X as B,Y as Q,a as r,b as d,c as A,d as H,e as O,f as P,g as W,h as k,i as F,j as K,k as q,l as x,m as I,n as L,o as a,p as R,s as M,t as j,w as b,x as U}from"./chunk-ALGHVJU7.js";function J(t){let e=w(()=>t());return tt(e)?new Proxy(t,{get(n,o){return o in e?(b(n[o])||Object.defineProperty(n,o,{value:u(()=>n()[o]),configurable:!0}),J(n[o])):n[o]}}):t}var _=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function tt(t){if(t===null||typeof t!="object"||et(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(_.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function et(t){return typeof t?.[Symbol.iterator]=="function"}var nt=new WeakMap,c=Symbol("STATE_SOURCE");function f(t,...e){t[c].update(n=>e.reduce((o,s)=>r(r({},o),typeof s=="function"?s(o):s),n)),it(t)}function ot(t){return t[c]()}function rt(t){return nt.get(t[c])||[]}function it(t){let e=rt(t);for(let n of e){let o=w(()=>ot(t));n(o)}}function V(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class i{constructor(){let l=o.reduce((v,X)=>X(v),st()),{stateSignals:h,props:g,methods:y,hooks:m}=l,S=r(r(r({},h),g),y);this[c]=l[c];for(let v of Reflect.ownKeys(S))this[v]=S[v];let{onInit:T,onDestroy:z}=m;T&&T(),z&&a(j).onDestroy(z)}static \u0275fac=function(h){return new(h||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function st(){return{[c]:U({}),stateSignals:{},props:{},methods:{},hooks:{}}}function ct(t){return e=>{let n=t(r(r(r({[c]:e[c]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),d(r({},e),{props:r(r({},e.props),n)})}}function Y(t){return ct(t)}function $(t){return e=>{let n=t(r(r(r({[c]:e[c]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),d(r({},e),{methods:r(r({},e.methods),n)})}}function G(t){return e=>{let n=typeof t=="function"?t():t,o=Reflect.ownKeys(n);e[c].update(i=>r(r({},i),n));let s=o.reduce((i,p)=>{let l=u(()=>e[c]()[p]);return d(r({},i),{[p]:J(l)})},{});return d(r({},e),{stateSignals:r(r({},e.stateSignals),s)})}}function E(t,e){e?.injector||R(E);let n=e?.injector??a(M),o=new O,s=t(o).subscribe();n.get(j).onDestroy(()=>s.unsubscribe());let i=(p,l)=>{if(at(p))return o.next(p),{destroy:A};let h=ut(),g=l?.injector??h??n;if(b(p)){let m=C(()=>{let S=p();w(()=>o.next(S))},{injector:g});return s.add({unsubscribe:()=>m.destroy()}),m}let y=p.subscribe(m=>o.next(m));return s.add(y),g!==n&&g.get(j).onDestroy(()=>y.unsubscribe()),{destroy:()=>y.unsubscribe()}};return i.destroy=s.unsubscribe.bind(s),i}function at(t){return!b(t)&&!W(t)}function ut(){try{return a(M)}catch{return}}function N(t,e,n){let o=typeof t=="function"?{next:t,error:e,complete:n}:t;return s=>s.pipe(x({next:o.next,complete:o.complete}),F(i=>(o.error(i),P)),o.finalize?K(o.finalize):i=>i)}var D=class t{constructor(e){this.http=e}#t=a(Q);apiUrl="https://4s3b8dv81f.execute-api.eu-west-2.amazonaws.com/chat";getQuestions(e){return this.http.post(this.apiUrl,{category:e},{headers:new B({"Content-Type":"application/json"})})}static \u0275fac=function(n){return new(n||t)(L(Q))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})};var ft={questions:[],activeQuestion:0,answers:{},isLoading:!1,error:""},Pt=V({providedIn:"root"},G(ft),$((t,e=a(D))=>({nextQuestion:()=>{f(t,()=>({activeQuestion:t.activeQuestion()+1}))},prevQuestion:()=>{f(t,()=>({activeQuestion:t.activeQuestion()-1}))},answerQuestion:n=>{let o=d(r({},t.answers()),{[t.activeQuestion()]:n});f(t,{answers:o})},resetQuiz:()=>{f(t,{activeQuestion:0,answers:{},questions:[]})},loadQuestions:E(H(x(()=>f(t,{isLoading:!0})),q(n=>e.getQuestions(n).pipe(k(o=>JSON.parse(o.answer.content)),N({next:o=>f(t,{questions:o}),error:()=>{f(t,{error:"Something went wrong!"})},finalize:()=>f(t,{isLoading:!1})})))))})),Y(t=>({currentQuestion:u(()=>t.questions().find((e,n)=>n===t.activeQuestion()?e:null)),isPrev:u(()=>t.activeQuestion()>0),isNext:u(()=>t.activeQuestion()<t.questions()?.length-1),currentQuestionAnswer:u(()=>t.answers()[t.activeQuestion()]??-1),score:u(()=>{let e=0;return t.questions().forEach((n,o)=>{t.answers()[o]===n.correctAnswer&&e++}),e})})));export{Pt as a};
